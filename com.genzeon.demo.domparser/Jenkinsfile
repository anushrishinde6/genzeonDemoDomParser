pipeline {
    agent any
    stages {
        stage('build') {
            steps {
                
                echo 'build stage'
                git 'https://github.com/anushrishinde6/genzeonDemoDomParser.git'
            }
            
            
            parallel linux: {
        node('linux') {
            checkout scm
            try {
                unstash 'app'
                sh 'make check'
            }
            finally {
                echo 'finally block'
            }
        }
    },
    windows: {
        node('windows') {
            bat "cd C:\\Users\\AShinde\\Desktop"
            bat "abc.cmd"
            sleep 1000
        }
    },
    
    windows1: {
        node('windows') {
            bat "cd C:\\Users\\AShinde\\Desktop"
            bat "abc1.cmd"
        }
    }
    
    
        }
    
     stage('test') {
            
            steps {
                echo 'test stage'
                script 
                {
                  
    			   dir("C:\\Users\\AShinde\\git\\genzeonDemoDomParser\\com.genzeon.demo.domparser") {
    			
    		     	if (isUnix()) {
      		         sh "ant main"
    			    } else {
      			     bat "ant main"
      				}
    			}
    		}
        
        script 
                {
                  
    			   dir("C:\\Users\\AShinde\\Desktop") {
    			
    		     	if (isUnix()) {
      		         sh "ant main"
    			    } else {
      			     bat "abc.cmd"
      				}
    			}
    		} 
     }
  }
        
    stage('deployment') {
            
            steps {
                echo 'deployment stage'
            }
        } 
     }
 }   